<div class="create-update-product">
  <div class="header">
    <span *ngIf="this.data?.isCreate">Tạo mới sản phẩm</span>
    <span *ngIf="!this.data?.isCreate">Cập nhật sản phẩm</span>
  </div>
  <div class="create-update-body">
    <mat-tab-group (selectedTabChange)="changeTab($event)" >
      <mat-tab label="Thông tin sản phẩm">
        <div class="row infor-product">
          <div class="col-md-6">
            <label>Mã sản phẩm: </label>
            <input type="text" [(ngModel)]="productInfor.productCode" class="form-control">
          </div>
          <div class="col-md-6">
            <label>Tên sản phẩm: </label>
            <input type="text" [(ngModel)]="productInfor.productName"  class="form-control">
          </div>
          <div class="col-md-6">
            <label>Giá bán: </label>
            <input type="text"  [(ngModel)]="productInfor.price" class="form-control">
          </div>
          <div class="col-md-6">
            <label>Danh mục: </label>
            <ng-select
              [items]="listCategories"
              bindLabel="categoriName"
              bindValue="id"
              placeholder="Danh mục"
              [clearable]="true"
              [(ngModel)]="productInfor.categoriesID"
            >
            </ng-select>
          </div>
          <div class="col-md-6">
            <label>Nhãn hiệu: </label>
            <ng-select
              [items]="listBrand"
              bindLabel="nameTranform"
              bindValue="id"
              placeholder="Nhãn hiệu"
              [clearable]="true"
              [(ngModel)]="productInfor.brandId"
            >
            </ng-select>
          </div>
          <div class="col-md-6">
            <label>Mô tả: </label>
            <input type="text" [(ngModel)]="productInfor.description"  class="form-control">
          </div>
          <div>
            <label>Ảnh sản phẩm: </label><br>
            <label for="upload-img-product" class="img">
              <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_58032_143468)">
                  <rect x="0.3125" y="0.3125" width="99.375" height="99.375" rx="4.6875" fill="#F3F5F6"/>
                  <rect x="0.3125" y="0.3125" width="99.375" height="99.375" rx="4.6875" stroke="#D7DBE0" stroke-width="0.625" stroke-dasharray="3.12 3.12"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M50.002 74.0544C48.7007 74.0544 47.394 73.7158 46.2313 73.0384C42.866 71.1051 37.6047 68.7078 31.7087 68.2838C27.7593 68.0224 24.666 64.7664 24.666 60.8731V33.2997C24.666 31.201 25.5647 29.193 27.13 27.793C28.7193 26.369 30.8607 25.6784 32.9833 25.9237C39.0687 26.5824 44.274 29.0037 47.5727 30.921C49.0713 31.7957 50.9327 31.793 52.426 30.9237C55.722 29.0037 60.93 26.5824 67.0207 25.9237C69.1567 25.689 71.282 26.369 72.8713 27.793C74.4367 29.193 75.3327 31.201 75.3327 33.2997V60.8731C75.3327 64.7691 72.2393 68.0251 68.2873 68.2838C62.3967 68.7078 57.138 71.1051 53.762 73.0438C52.6047 73.7158 51.3033 74.0544 50.002 74.0544ZM48.0004 61.7016C48.0004 62.8056 48.8964 63.7016 50.0004 63.7016C51.1044 63.7016 52.0004 62.8056 52.0004 61.7016V43.7016C52.0004 42.5976 51.1044 41.7016 50.0004 41.7016C48.8964 41.7016 48.0004 42.5976 48.0004 43.7016V61.7016Z" fill="white"/>
                </g>
                <rect width="100" height="100" rx="10" fill="black" fill-opacity="0.1"/>
                <rect x="40" y="40" width="20" height="20" rx="10" fill="white"/>
                <path d="M46.25 50H53.75" stroke="black" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M50 53.75V46.25" stroke="black" stroke-width="0.9375" stroke-linecap="round" stroke-linejoin="round"/>
                <defs>
                  <clipPath id="clip0_58032_143468">
                    <rect width="100" height="100" rx="10" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </label>
            <input type="file" id="upload-img-product" style="display: none" (change)="onFileSelected($event)" multiple accept=".png, .jpg, .jpeg">
            <div class="list-image-selected">
              <div class="img-item" *ngFor="let imageUrl of lstUrlImgUpdate;let index=index">
                <img *ngIf="lstUrlImgUpdate" [src]="domainFile + imageUrl" class="img-selected" alt="Selected Image">
                <div class="icon" (click)="removeImgProduct(imageUrl,index, true)">
                  <i class="fa-regular fa-trash-can" style="color: red; width: 10px;left: -1.5px;position: relative;"></i>
                </div>
              </div>
              <div class="img-item" *ngFor="let imageUrl of imageUrls;let index=index">
                <img [src]="imageUrl" class="img-selected" alt="Selected Image">
                <div class="icon" (click)="removeImgProduct(imageUrl,index,false)">
                  <i class="fa-regular fa-trash-can" style="color: red; width: 10px;left: -1.5px;position: relative;"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Kích cỡ">
        <div class="row" *ngFor="let size of listSize; let index = index">
          <div class="col-md-6">
            <div class="title-infor">
              <label>Tên size: </label>
            </div>
            <input type="text" [(ngModel)]="size.sizeName" class="form-control">
          </div>
          <div class="col-md-6">
            <div class="title-infor">
              <label>Mô tả: </label>
              <button class="btn-action-sc" style=" color: #D14343" (click)="removeSize(size)">
                <svg width="8" height="10" viewBox="0 0 8 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.45297 2.18458C7.61506 2.18458 7.75 2.31916 7.75 2.49041V2.64874C7.75 2.81582 7.61506 2.95457 7.45297 2.95457H0.547439C0.384942 2.95457 0.25 2.81582 0.25 2.64874V2.49041C0.25 2.31916 0.384942 2.18458 0.547439 2.18458H1.76232C2.0091 2.18458 2.22388 2.00917 2.27939 1.76167L2.34301 1.4775C2.44189 1.09042 2.76729 0.833344 3.1397 0.833344H4.8603C5.22866 0.833344 5.5577 1.09042 5.65293 1.45709L5.72101 1.76125C5.77612 2.00917 5.9909 2.18458 6.23809 2.18458H7.45297ZM6.83576 7.97251C6.9626 6.79044 7.18466 3.98214 7.18466 3.95381C7.19277 3.86797 7.16481 3.78672 7.10929 3.72131C7.04972 3.66006 6.97435 3.62381 6.89128 3.62381H1.11189C1.02841 3.62381 0.948982 3.66006 0.893871 3.72131C0.837949 3.78672 0.810394 3.86797 0.814446 3.95381C0.815191 3.95901 0.823159 4.05793 0.83648 4.22331C0.89566 4.95799 1.06049 7.00424 1.167 7.97251C1.24237 8.68584 1.71041 9.13417 2.38836 9.15042C2.91151 9.1625 3.45047 9.16667 4.00158 9.16667C4.52068 9.16667 5.04789 9.1625 5.58725 9.15042C6.2887 9.13834 6.75634 8.69792 6.83576 7.97251Z" fill="#D14343"/>
                </svg>
                Xóa
              </button>
            </div>
            <input type="text" [(ngModel)]="size.description" class="form-control">
          </div>
        </div>
        <div>
          <button class="addSize btn btn-success" (click)="addSize()">Thêm size</button>
        </div>
      </mat-tab>
      <mat-tab label="Loại sản phẩm">
        <div class="row type-product" *ngFor="let type of listType; let index = index">
          <div class="col-md-6">
            <div class="title-infor">
              <label>Tên type: </label>
            </div>
            <input type="text" [(ngModel)]="type.typeName" class="form-control">
          </div>
          <div class="col-md-6">
            <div class="title-infor">
              <label>Mô tả: </label>
              <button  class="btn-action-sc" style=" color: #D14343" (click)="removeType(type)">
                <svg width="8" height="10" viewBox="0 0 8 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.45297 2.18458C7.61506 2.18458 7.75 2.31916 7.75 2.49041V2.64874C7.75 2.81582 7.61506 2.95457 7.45297 2.95457H0.547439C0.384942 2.95457 0.25 2.81582 0.25 2.64874V2.49041C0.25 2.31916 0.384942 2.18458 0.547439 2.18458H1.76232C2.0091 2.18458 2.22388 2.00917 2.27939 1.76167L2.34301 1.4775C2.44189 1.09042 2.76729 0.833344 3.1397 0.833344H4.8603C5.22866 0.833344 5.5577 1.09042 5.65293 1.45709L5.72101 1.76125C5.77612 2.00917 5.9909 2.18458 6.23809 2.18458H7.45297ZM6.83576 7.97251C6.9626 6.79044 7.18466 3.98214 7.18466 3.95381C7.19277 3.86797 7.16481 3.78672 7.10929 3.72131C7.04972 3.66006 6.97435 3.62381 6.89128 3.62381H1.11189C1.02841 3.62381 0.948982 3.66006 0.893871 3.72131C0.837949 3.78672 0.810394 3.86797 0.814446 3.95381C0.815191 3.95901 0.823159 4.05793 0.83648 4.22331C0.89566 4.95799 1.06049 7.00424 1.167 7.97251C1.24237 8.68584 1.71041 9.13417 2.38836 9.15042C2.91151 9.1625 3.45047 9.16667 4.00158 9.16667C4.52068 9.16667 5.04789 9.1625 5.58725 9.15042C6.2887 9.13834 6.75634 8.69792 6.83576 7.97251Z" fill="#D14343"/>
                </svg>
                Xóa
              </button>
            </div>

            <input type="text" [(ngModel)]="type.description" class="form-control">
          </div>
        </div>
        <div>
          <button  class="addType btn btn-success"  (click)="addType()">Thêm size</button>
        </div>
      </mat-tab>
      <mat-tab *ngIf="!data.isCreate" label="Số lượng">
        <table>
          <tr>
            <th>Tên size</th>
            <th>Tên loại</th>
            <th>Số lượng</th>
          </tr>
          <tr *ngFor="let productDetail of listProductDetail;let index=index;">
            <td>{{productDetail.sizeName}}</td>
            <td>{{productDetail.typeName}}</td>
            <td>
              <input type="number" class="form-control" [(ngModel)]="productDetail.quantity">
            </td>
          </tr>
        </table>
      </mat-tab>
    </mat-tab-group>
  </div>
  <div class="footer">
    <button class="btn-submit btn" *ngIf="this.data?.isCreate" (click)="submit()">Thêm mới</button>
    <button class="btn-submit btn"  *ngIf="!this.data?.isCreate" (click)="updateProduct()">Cập nhật</button>
  </div>
</div>
