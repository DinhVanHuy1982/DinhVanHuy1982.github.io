import {ChangeDetectorRef, Component, OnInit} from '@angular/core';
import {ActivatedRoute, Router} from "@angular/router";
import {DomSanitizer} from "@angular/platform-browser";
import {CommonFunction} from "../../../../core/service/utils/common-function";
import {environment} from "../../../../environment/environment";
import {ProductService} from "../../../admin/Views/Pages/product-management/product.service";
import {MenuHorizontalComponent} from "../menu-horizontal/menu-horizontal.component";

@Component({
  selector: 'app-search-page',
  templateUrl: './search-page.component.html',
  styleUrls: ['./search-page.component.scss']
})
export class SearchPageComponent implements OnInit{
  searchProduct:SearchProduct = new SearchProduct();
  domailFile = environment.DOMAIN_FILE_SERVER
  totalElement=0;
  totalPage=0;
  lstProduct :any;

  isLoading=false;
  // searchPakageExam: SearchPakageExam = new SearchPakageExam();
  priceTo: any;
  priceFrom: any;
  listRate = [
    {
      value: 1,
      name: 1,
      svg: this.sanitizer.bypassSecurityTrustHtml(`<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.10276 3.60575C6.94719 2.09091 7.36941 1.3335 8.00065 1.3335C8.63189 1.3335 9.05411 2.09091 9.89854 3.60575L10.117 3.99765C10.357 4.42812 10.4769 4.64335 10.664 4.78537C10.8511 4.92738 11.0841 4.9801 11.5501 5.08553L11.9743 5.18152C13.6141 5.55253 14.434 5.73804 14.629 6.36532C14.8241 6.99259 14.2652 7.64621 13.1473 8.95345L12.858 9.29164C12.5404 9.66312 12.3815 9.84886 12.3101 10.0786C12.2386 10.3084 12.2626 10.5562 12.3107 11.0519L12.3544 11.5031C12.5234 13.2472 12.6079 14.1193 12.0972 14.507C11.5865 14.8947 10.8189 14.5412 9.28354 13.8343L8.88633 13.6514C8.45003 13.4505 8.23189 13.3501 8.00065 13.3501C7.76942 13.3501 7.55127 13.4505 7.11498 13.6514L6.71777 13.8343C5.18243 14.5412 4.41477 14.8947 3.90408 14.507C3.3934 14.1193 3.4779 13.2472 3.64692 11.5031L3.69064 11.0519C3.73867 10.5562 3.76268 10.3084 3.69123 10.0786C3.61977 9.84886 3.46093 9.66312 3.14326 9.29164L2.85405 8.95345C1.73615 7.64621 1.1772 6.99259 1.37227 6.36532C1.56733 5.73804 2.38722 5.55253 4.02701 5.18152L4.45124 5.08553C4.91722 4.9801 5.15021 4.92738 5.33728 4.78537C5.52435 4.64335 5.64433 4.42812 5.8843 3.99765L6.10276 3.60575Z" fill="#F3A412"/>
                <path d="M24.1028 3.60575C24.9472 2.09091 25.3694 1.3335 26.0007 1.3335C26.6319 1.3335 27.0541 2.09091 27.8985 3.60575L28.117 3.99765C28.357 4.42812 28.4769 4.64335 28.664 4.78537C28.8511 4.92738 29.0841 4.9801 29.5501 5.08553L29.9743 5.18152C31.6141 5.55253 32.434 5.73804 32.629 6.36532C32.8241 6.99259 32.2652 7.64621 31.1473 8.95345L30.858 9.29164C30.5404 9.66312 30.3815 9.84886 30.3101 10.0786C30.2386 10.3084 30.2626 10.5562 30.3107 11.0519L30.3544 11.5031C30.5234 13.2472 30.6079 14.1193 30.0972 14.507C29.5865 14.8947 28.8189 14.5412 27.2835 13.8343L26.8863 13.6514C26.45 13.4505 26.2319 13.3501 26.0007 13.3501C25.7694 13.3501 25.5513 13.4505 25.115 13.6514L24.7178 13.8343C23.1824 14.5412 22.4148 14.8947 21.9041 14.507C21.3934 14.1193 21.4779 13.2472 21.6469 11.5031L21.6906 11.0519C21.7387 10.5562 21.7627 10.3084 21.6912 10.0786C21.6198 9.84886 21.4609 9.66312 21.1433 9.29164L20.854 8.95345C19.7362 7.64621 19.1772 6.99259 19.3723 6.36532C19.5673 5.73804 20.3872 5.55253 22.027 5.18152L22.4512 5.08553C22.9172 4.9801 23.1502 4.92738 23.3373 4.78537C23.5244 4.64335 23.6443 4.42812 23.8843 3.99765L24.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M42.1028 3.60575C42.9472 2.09091 43.3694 1.3335 44.0007 1.3335C44.6319 1.3335 45.0541 2.09091 45.8985 3.60575L46.117 3.99765C46.357 4.42812 46.4769 4.64335 46.664 4.78537C46.8511 4.92738 47.0841 4.9801 47.5501 5.08553L47.9743 5.18152C49.6141 5.55253 50.434 5.73804 50.629 6.36532C50.8241 6.99259 50.2652 7.64621 49.1473 8.95345L48.858 9.29164C48.5404 9.66312 48.3815 9.84886 48.3101 10.0786C48.2386 10.3084 48.2626 10.5562 48.3107 11.0519L48.3544 11.5031C48.5234 13.2472 48.6079 14.1193 48.0972 14.507C47.5865 14.8947 46.8189 14.5412 45.2835 13.8343L44.8863 13.6514C44.45 13.4505 44.2319 13.3501 44.0007 13.3501C43.7694 13.3501 43.5513 13.4505 43.115 13.6514L42.7178 13.8343C41.1824 14.5412 40.4148 14.8947 39.9041 14.507C39.3934 14.1193 39.4779 13.2472 39.6469 11.5031L39.6906 11.0519C39.7387 10.5562 39.7627 10.3084 39.6912 10.0786C39.6198 9.84886 39.4609 9.66312 39.1433 9.29164L38.854 8.95345C37.7362 7.64621 37.1772 6.99259 37.3723 6.36532C37.5673 5.73804 38.3872 5.55253 40.027 5.18152L40.4512 5.08553C40.9172 4.9801 41.1502 4.92738 41.3373 4.78537C41.5244 4.64335 41.6443 4.42812 41.8843 3.99765L42.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M60.1028 3.60575C60.9472 2.09091 61.3694 1.3335 62.0007 1.3335C62.6319 1.3335 63.0541 2.09091 63.8985 3.60575L64.117 3.99765C64.357 4.42812 64.4769 4.64335 64.664 4.78537C64.8511 4.92738 65.0841 4.9801 65.5501 5.08553L65.9743 5.18152C67.6141 5.55253 68.434 5.73804 68.629 6.36532C68.8241 6.99259 68.2652 7.64621 67.1473 8.95345L66.858 9.29164C66.5404 9.66312 66.3815 9.84886 66.3101 10.0786C66.2386 10.3084 66.2626 10.5562 66.3107 11.0519L66.3544 11.5031C66.5234 13.2472 66.6079 14.1193 66.0972 14.507C65.5865 14.8947 64.8189 14.5412 63.2835 13.8343L62.8863 13.6514C62.45 13.4505 62.2319 13.3501 62.0007 13.3501C61.7694 13.3501 61.5513 13.4505 61.115 13.6514L60.7178 13.8343C59.1824 14.5412 58.4148 14.8947 57.9041 14.507C57.3934 14.1193 57.4779 13.2472 57.6469 11.5031L57.6906 11.0519C57.7387 10.5562 57.7627 10.3084 57.6912 10.0786C57.6198 9.84886 57.4609 9.66312 57.1433 9.29164L56.854 8.95345C55.7362 7.64621 55.1772 6.99259 55.3723 6.36532C55.5673 5.73804 56.3872 5.55253 58.027 5.18152L58.4512 5.08553C58.9172 4.9801 59.1502 4.92738 59.3373 4.78537C59.5244 4.64335 59.6443 4.42812 59.8843 3.99765L60.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M78.1028 3.60575C78.9472 2.09091 79.3694 1.3335 80.0007 1.3335C80.6319 1.3335 81.0541 2.09091 81.8985 3.60575L82.117 3.99765C82.357 4.42812 82.4769 4.64335 82.664 4.78537C82.8511 4.92738 83.0841 4.9801 83.5501 5.08553L83.9743 5.18152C85.6141 5.55253 86.434 5.73804 86.629 6.36532C86.8241 6.99259 86.2652 7.64621 85.1473 8.95345L84.858 9.29164C84.5404 9.66312 84.3815 9.84886 84.3101 10.0786C84.2386 10.3084 84.2626 10.5562 84.3107 11.0519L84.3544 11.5031C84.5234 13.2472 84.6079 14.1193 84.0972 14.507C83.5865 14.8947 82.8189 14.5412 81.2835 13.8343L80.8863 13.6514C80.45 13.4505 80.2319 13.3501 80.0007 13.3501C79.7694 13.3501 79.5513 13.4505 79.115 13.6514L78.7178 13.8343C77.1824 14.5412 76.4148 14.8947 75.9041 14.507C75.3934 14.1193 75.4779 13.2472 75.6469 11.5031L75.6906 11.0519C75.7387 10.5562 75.7627 10.3084 75.6912 10.0786C75.6198 9.84886 75.4609 9.66312 75.1433 9.29164L74.854 8.95345C73.7362 7.64621 73.1772 6.99259 73.3723 6.36532C73.5673 5.73804 74.3872 5.55253 76.027 5.18152L76.4512 5.08553C76.9172 4.9801 77.1502 4.92738 77.3373 4.78537C77.5244 4.64335 77.6443 4.42812 77.8843 3.99765L78.1028 3.60575Z" fill="#E5E5E5"/>
            </svg>`),
      checked: false
    },
    {
      value: 2,
      name: 2,
      svg: this.sanitizer.bypassSecurityTrustHtml(`<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.10276 3.60575C6.94719 2.09091 7.36941 1.3335 8.00065 1.3335C8.63189 1.3335 9.05411 2.09091 9.89854 3.60575L10.117 3.99765C10.357 4.42812 10.4769 4.64335 10.664 4.78537C10.8511 4.92738 11.0841 4.9801 11.5501 5.08553L11.9743 5.18152C13.6141 5.55253 14.434 5.73804 14.629 6.36532C14.8241 6.99259 14.2652 7.64621 13.1473 8.95345L12.858 9.29164C12.5404 9.66312 12.3815 9.84886 12.3101 10.0786C12.2386 10.3084 12.2626 10.5562 12.3107 11.0519L12.3544 11.5031C12.5234 13.2472 12.6079 14.1193 12.0972 14.507C11.5865 14.8947 10.8189 14.5412 9.28354 13.8343L8.88633 13.6514C8.45003 13.4505 8.23189 13.3501 8.00065 13.3501C7.76942 13.3501 7.55127 13.4505 7.11498 13.6514L6.71777 13.8343C5.18243 14.5412 4.41477 14.8947 3.90408 14.507C3.3934 14.1193 3.4779 13.2472 3.64692 11.5031L3.69064 11.0519C3.73867 10.5562 3.76268 10.3084 3.69123 10.0786C3.61977 9.84886 3.46093 9.66312 3.14326 9.29164L2.85405 8.95345C1.73615 7.64621 1.1772 6.99259 1.37227 6.36532C1.56733 5.73804 2.38722 5.55253 4.02701 5.18152L4.45124 5.08553C4.91722 4.9801 5.15021 4.92738 5.33728 4.78537C5.52435 4.64335 5.64433 4.42812 5.8843 3.99765L6.10276 3.60575Z" fill="#F3A412"/>
                <path d="M24.1028 3.60575C24.9472 2.09091 25.3694 1.3335 26.0007 1.3335C26.6319 1.3335 27.0541 2.09091 27.8985 3.60575L28.117 3.99765C28.357 4.42812 28.4769 4.64335 28.664 4.78537C28.8511 4.92738 29.0841 4.9801 29.5501 5.08553L29.9743 5.18152C31.6141 5.55253 32.434 5.73804 32.629 6.36532C32.8241 6.99259 32.2652 7.64621 31.1473 8.95345L30.858 9.29164C30.5404 9.66312 30.3815 9.84886 30.3101 10.0786C30.2386 10.3084 30.2626 10.5562 30.3107 11.0519L30.3544 11.5031C30.5234 13.2472 30.6079 14.1193 30.0972 14.507C29.5865 14.8947 28.8189 14.5412 27.2835 13.8343L26.8863 13.6514C26.45 13.4505 26.2319 13.3501 26.0007 13.3501C25.7694 13.3501 25.5513 13.4505 25.115 13.6514L24.7178 13.8343C23.1824 14.5412 22.4148 14.8947 21.9041 14.507C21.3934 14.1193 21.4779 13.2472 21.6469 11.5031L21.6906 11.0519C21.7387 10.5562 21.7627 10.3084 21.6912 10.0786C21.6198 9.84886 21.4609 9.66312 21.1433 9.29164L20.854 8.95345C19.7362 7.64621 19.1772 6.99259 19.3723 6.36532C19.5673 5.73804 20.3872 5.55253 22.027 5.18152L22.4512 5.08553C22.9172 4.9801 23.1502 4.92738 23.3373 4.78537C23.5244 4.64335 23.6443 4.42812 23.8843 3.99765L24.1028 3.60575Z" fill="#F3A412"/>
                <path d="M42.1028 3.60575C42.9472 2.09091 43.3694 1.3335 44.0007 1.3335C44.6319 1.3335 45.0541 2.09091 45.8985 3.60575L46.117 3.99765C46.357 4.42812 46.4769 4.64335 46.664 4.78537C46.8511 4.92738 47.0841 4.9801 47.5501 5.08553L47.9743 5.18152C49.6141 5.55253 50.434 5.73804 50.629 6.36532C50.8241 6.99259 50.2652 7.64621 49.1473 8.95345L48.858 9.29164C48.5404 9.66312 48.3815 9.84886 48.3101 10.0786C48.2386 10.3084 48.2626 10.5562 48.3107 11.0519L48.3544 11.5031C48.5234 13.2472 48.6079 14.1193 48.0972 14.507C47.5865 14.8947 46.8189 14.5412 45.2835 13.8343L44.8863 13.6514C44.45 13.4505 44.2319 13.3501 44.0007 13.3501C43.7694 13.3501 43.5513 13.4505 43.115 13.6514L42.7178 13.8343C41.1824 14.5412 40.4148 14.8947 39.9041 14.507C39.3934 14.1193 39.4779 13.2472 39.6469 11.5031L39.6906 11.0519C39.7387 10.5562 39.7627 10.3084 39.6912 10.0786C39.6198 9.84886 39.4609 9.66312 39.1433 9.29164L38.854 8.95345C37.7362 7.64621 37.1772 6.99259 37.3723 6.36532C37.5673 5.73804 38.3872 5.55253 40.027 5.18152L40.4512 5.08553C40.9172 4.9801 41.1502 4.92738 41.3373 4.78537C41.5244 4.64335 41.6443 4.42812 41.8843 3.99765L42.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M60.1028 3.60575C60.9472 2.09091 61.3694 1.3335 62.0007 1.3335C62.6319 1.3335 63.0541 2.09091 63.8985 3.60575L64.117 3.99765C64.357 4.42812 64.4769 4.64335 64.664 4.78537C64.8511 4.92738 65.0841 4.9801 65.5501 5.08553L65.9743 5.18152C67.6141 5.55253 68.434 5.73804 68.629 6.36532C68.8241 6.99259 68.2652 7.64621 67.1473 8.95345L66.858 9.29164C66.5404 9.66312 66.3815 9.84886 66.3101 10.0786C66.2386 10.3084 66.2626 10.5562 66.3107 11.0519L66.3544 11.5031C66.5234 13.2472 66.6079 14.1193 66.0972 14.507C65.5865 14.8947 64.8189 14.5412 63.2835 13.8343L62.8863 13.6514C62.45 13.4505 62.2319 13.3501 62.0007 13.3501C61.7694 13.3501 61.5513 13.4505 61.115 13.6514L60.7178 13.8343C59.1824 14.5412 58.4148 14.8947 57.9041 14.507C57.3934 14.1193 57.4779 13.2472 57.6469 11.5031L57.6906 11.0519C57.7387 10.5562 57.7627 10.3084 57.6912 10.0786C57.6198 9.84886 57.4609 9.66312 57.1433 9.29164L56.854 8.95345C55.7362 7.64621 55.1772 6.99259 55.3723 6.36532C55.5673 5.73804 56.3872 5.55253 58.027 5.18152L58.4512 5.08553C58.9172 4.9801 59.1502 4.92738 59.3373 4.78537C59.5244 4.64335 59.6443 4.42812 59.8843 3.99765L60.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M78.1028 3.60575C78.9472 2.09091 79.3694 1.3335 80.0007 1.3335C80.6319 1.3335 81.0541 2.09091 81.8985 3.60575L82.117 3.99765C82.357 4.42812 82.4769 4.64335 82.664 4.78537C82.8511 4.92738 83.0841 4.9801 83.5501 5.08553L83.9743 5.18152C85.6141 5.55253 86.434 5.73804 86.629 6.36532C86.8241 6.99259 86.2652 7.64621 85.1473 8.95345L84.858 9.29164C84.5404 9.66312 84.3815 9.84886 84.3101 10.0786C84.2386 10.3084 84.2626 10.5562 84.3107 11.0519L84.3544 11.5031C84.5234 13.2472 84.6079 14.1193 84.0972 14.507C83.5865 14.8947 82.8189 14.5412 81.2835 13.8343L80.8863 13.6514C80.45 13.4505 80.2319 13.3501 80.0007 13.3501C79.7694 13.3501 79.5513 13.4505 79.115 13.6514L78.7178 13.8343C77.1824 14.5412 76.4148 14.8947 75.9041 14.507C75.3934 14.1193 75.4779 13.2472 75.6469 11.5031L75.6906 11.0519C75.7387 10.5562 75.7627 10.3084 75.6912 10.0786C75.6198 9.84886 75.4609 9.66312 75.1433 9.29164L74.854 8.95345C73.7362 7.64621 73.1772 6.99259 73.3723 6.36532C73.5673 5.73804 74.3872 5.55253 76.027 5.18152L76.4512 5.08553C76.9172 4.9801 77.1502 4.92738 77.3373 4.78537C77.5244 4.64335 77.6443 4.42812 77.8843 3.99765L78.1028 3.60575Z" fill="#E5E5E5"/>
            </svg>`),
      checked: false
    },
    {
      value: 3,
      name: 3,
      svg: this.sanitizer.bypassSecurityTrustHtml(`<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.10276 3.60575C6.94719 2.09091 7.36941 1.3335 8.00065 1.3335C8.63189 1.3335 9.05411 2.09091 9.89854 3.60575L10.117 3.99765C10.357 4.42812 10.4769 4.64335 10.664 4.78537C10.8511 4.92738 11.0841 4.9801 11.5501 5.08553L11.9743 5.18152C13.6141 5.55253 14.434 5.73804 14.629 6.36532C14.8241 6.99259 14.2652 7.64621 13.1473 8.95345L12.858 9.29164C12.5404 9.66312 12.3815 9.84886 12.3101 10.0786C12.2386 10.3084 12.2626 10.5562 12.3107 11.0519L12.3544 11.5031C12.5234 13.2472 12.6079 14.1193 12.0972 14.507C11.5865 14.8947 10.8189 14.5412 9.28354 13.8343L8.88633 13.6514C8.45003 13.4505 8.23189 13.3501 8.00065 13.3501C7.76942 13.3501 7.55127 13.4505 7.11498 13.6514L6.71777 13.8343C5.18243 14.5412 4.41477 14.8947 3.90408 14.507C3.3934 14.1193 3.4779 13.2472 3.64692 11.5031L3.69064 11.0519C3.73867 10.5562 3.76268 10.3084 3.69123 10.0786C3.61977 9.84886 3.46093 9.66312 3.14326 9.29164L2.85405 8.95345C1.73615 7.64621 1.1772 6.99259 1.37227 6.36532C1.56733 5.73804 2.38722 5.55253 4.02701 5.18152L4.45124 5.08553C4.91722 4.9801 5.15021 4.92738 5.33728 4.78537C5.52435 4.64335 5.64433 4.42812 5.8843 3.99765L6.10276 3.60575Z" fill="#F3A412"/>
                <path d="M24.1028 3.60575C24.9472 2.09091 25.3694 1.3335 26.0007 1.3335C26.6319 1.3335 27.0541 2.09091 27.8985 3.60575L28.117 3.99765C28.357 4.42812 28.4769 4.64335 28.664 4.78537C28.8511 4.92738 29.0841 4.9801 29.5501 5.08553L29.9743 5.18152C31.6141 5.55253 32.434 5.73804 32.629 6.36532C32.8241 6.99259 32.2652 7.64621 31.1473 8.95345L30.858 9.29164C30.5404 9.66312 30.3815 9.84886 30.3101 10.0786C30.2386 10.3084 30.2626 10.5562 30.3107 11.0519L30.3544 11.5031C30.5234 13.2472 30.6079 14.1193 30.0972 14.507C29.5865 14.8947 28.8189 14.5412 27.2835 13.8343L26.8863 13.6514C26.45 13.4505 26.2319 13.3501 26.0007 13.3501C25.7694 13.3501 25.5513 13.4505 25.115 13.6514L24.7178 13.8343C23.1824 14.5412 22.4148 14.8947 21.9041 14.507C21.3934 14.1193 21.4779 13.2472 21.6469 11.5031L21.6906 11.0519C21.7387 10.5562 21.7627 10.3084 21.6912 10.0786C21.6198 9.84886 21.4609 9.66312 21.1433 9.29164L20.854 8.95345C19.7362 7.64621 19.1772 6.99259 19.3723 6.36532C19.5673 5.73804 20.3872 5.55253 22.027 5.18152L22.4512 5.08553C22.9172 4.9801 23.1502 4.92738 23.3373 4.78537C23.5244 4.64335 23.6443 4.42812 23.8843 3.99765L24.1028 3.60575Z" fill="#F3A412"/>
                <path d="M42.1028 3.60575C42.9472 2.09091 43.3694 1.3335 44.0007 1.3335C44.6319 1.3335 45.0541 2.09091 45.8985 3.60575L46.117 3.99765C46.357 4.42812 46.4769 4.64335 46.664 4.78537C46.8511 4.92738 47.0841 4.9801 47.5501 5.08553L47.9743 5.18152C49.6141 5.55253 50.434 5.73804 50.629 6.36532C50.8241 6.99259 50.2652 7.64621 49.1473 8.95345L48.858 9.29164C48.5404 9.66312 48.3815 9.84886 48.3101 10.0786C48.2386 10.3084 48.2626 10.5562 48.3107 11.0519L48.3544 11.5031C48.5234 13.2472 48.6079 14.1193 48.0972 14.507C47.5865 14.8947 46.8189 14.5412 45.2835 13.8343L44.8863 13.6514C44.45 13.4505 44.2319 13.3501 44.0007 13.3501C43.7694 13.3501 43.5513 13.4505 43.115 13.6514L42.7178 13.8343C41.1824 14.5412 40.4148 14.8947 39.9041 14.507C39.3934 14.1193 39.4779 13.2472 39.6469 11.5031L39.6906 11.0519C39.7387 10.5562 39.7627 10.3084 39.6912 10.0786C39.6198 9.84886 39.4609 9.66312 39.1433 9.29164L38.854 8.95345C37.7362 7.64621 37.1772 6.99259 37.3723 6.36532C37.5673 5.73804 38.3872 5.55253 40.027 5.18152L40.4512 5.08553C40.9172 4.9801 41.1502 4.92738 41.3373 4.78537C41.5244 4.64335 41.6443 4.42812 41.8843 3.99765L42.1028 3.60575Z" fill="#F3A412"/>
                <path d="M60.1028 3.60575C60.9472 2.09091 61.3694 1.3335 62.0007 1.3335C62.6319 1.3335 63.0541 2.09091 63.8985 3.60575L64.117 3.99765C64.357 4.42812 64.4769 4.64335 64.664 4.78537C64.8511 4.92738 65.0841 4.9801 65.5501 5.08553L65.9743 5.18152C67.6141 5.55253 68.434 5.73804 68.629 6.36532C68.8241 6.99259 68.2652 7.64621 67.1473 8.95345L66.858 9.29164C66.5404 9.66312 66.3815 9.84886 66.3101 10.0786C66.2386 10.3084 66.2626 10.5562 66.3107 11.0519L66.3544 11.5031C66.5234 13.2472 66.6079 14.1193 66.0972 14.507C65.5865 14.8947 64.8189 14.5412 63.2835 13.8343L62.8863 13.6514C62.45 13.4505 62.2319 13.3501 62.0007 13.3501C61.7694 13.3501 61.5513 13.4505 61.115 13.6514L60.7178 13.8343C59.1824 14.5412 58.4148 14.8947 57.9041 14.507C57.3934 14.1193 57.4779 13.2472 57.6469 11.5031L57.6906 11.0519C57.7387 10.5562 57.7627 10.3084 57.6912 10.0786C57.6198 9.84886 57.4609 9.66312 57.1433 9.29164L56.854 8.95345C55.7362 7.64621 55.1772 6.99259 55.3723 6.36532C55.5673 5.73804 56.3872 5.55253 58.027 5.18152L58.4512 5.08553C58.9172 4.9801 59.1502 4.92738 59.3373 4.78537C59.5244 4.64335 59.6443 4.42812 59.8843 3.99765L60.1028 3.60575Z" fill="#E5E5E5"/>
                <path d="M78.1028 3.60575C78.9472 2.09091 79.3694 1.3335 80.0007 1.3335C80.6319 1.3335 81.0541 2.09091 81.8985 3.60575L82.117 3.99765C82.357 4.42812 82.4769 4.64335 82.664 4.78537C82.8511 4.92738 83.0841 4.9801 83.5501 5.08553L83.9743 5.18152C85.6141 5.55253 86.434 5.73804 86.629 6.36532C86.8241 6.99259 86.2652 7.64621 85.1473 8.95345L84.858 9.29164C84.5404 9.66312 84.3815 9.84886 84.3101 10.0786C84.2386 10.3084 84.2626 10.5562 84.3107 11.0519L84.3544 11.5031C84.5234 13.2472 84.6079 14.1193 84.0972 14.507C83.5865 14.8947 82.8189 14.5412 81.2835 13.8343L80.8863 13.6514C80.45 13.4505 80.2319 13.3501 80.0007 13.3501C79.7694 13.3501 79.5513 13.4505 79.115 13.6514L78.7178 13.8343C77.1824 14.5412 76.4148 14.8947 75.9041 14.507C75.3934 14.1193 75.4779 13.2472 75.6469 11.5031L75.6906 11.0519C75.7387 10.5562 75.7627 10.3084 75.6912 10.0786C75.6198 9.84886 75.4609 9.66312 75.1433 9.29164L74.854 8.95345C73.7362 7.64621 73.1772 6.99259 73.3723 6.36532C73.5673 5.73804 74.3872 5.55253 76.027 5.18152L76.4512 5.08553C76.9172 4.9801 77.1502 4.92738 77.3373 4.78537C77.5244 4.64335 77.6443 4.42812 77.8843 3.99765L78.1028 3.60575Z" fill="#E5E5E5"/>
            </svg>`),
      checked: false
    },
    {
      value: 4,
      name: 4,
      svg: this.sanitizer.bypassSecurityTrustHtml(`<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.10276 3.60575C6.94719 2.09091 7.36941 1.3335 8.00065 1.3335C8.63189 1.3335 9.05411 2.09091 9.89854 3.60575L10.117 3.99765C10.357 4.42812 10.4769 4.64335 10.664 4.78537C10.8511 4.92738 11.0841 4.9801 11.5501 5.08553L11.9743 5.18152C13.6141 5.55253 14.434 5.73804 14.629 6.36532C14.8241 6.99259 14.2652 7.64621 13.1473 8.95345L12.858 9.29164C12.5404 9.66312 12.3815 9.84886 12.3101 10.0786C12.2386 10.3084 12.2626 10.5562 12.3107 11.0519L12.3544 11.5031C12.5234 13.2472 12.6079 14.1193 12.0972 14.507C11.5865 14.8947 10.8189 14.5412 9.28354 13.8343L8.88633 13.6514C8.45003 13.4505 8.23189 13.3501 8.00065 13.3501C7.76942 13.3501 7.55127 13.4505 7.11498 13.6514L6.71777 13.8343C5.18243 14.5412 4.41477 14.8947 3.90408 14.507C3.3934 14.1193 3.4779 13.2472 3.64692 11.5031L3.69064 11.0519C3.73867 10.5562 3.76268 10.3084 3.69123 10.0786C3.61977 9.84886 3.46093 9.66312 3.14326 9.29164L2.85405 8.95345C1.73615 7.64621 1.1772 6.99259 1.37227 6.36532C1.56733 5.73804 2.38722 5.55253 4.02701 5.18152L4.45124 5.08553C4.91722 4.9801 5.15021 4.92738 5.33728 4.78537C5.52435 4.64335 5.64433 4.42812 5.8843 3.99765L6.10276 3.60575Z" fill="#F3A412"/>
                <path d="M24.1028 3.60575C24.9472 2.09091 25.3694 1.3335 26.0007 1.3335C26.6319 1.3335 27.0541 2.09091 27.8985 3.60575L28.117 3.99765C28.357 4.42812 28.4769 4.64335 28.664 4.78537C28.8511 4.92738 29.0841 4.9801 29.5501 5.08553L29.9743 5.18152C31.6141 5.55253 32.434 5.73804 32.629 6.36532C32.8241 6.99259 32.2652 7.64621 31.1473 8.95345L30.858 9.29164C30.5404 9.66312 30.3815 9.84886 30.3101 10.0786C30.2386 10.3084 30.2626 10.5562 30.3107 11.0519L30.3544 11.5031C30.5234 13.2472 30.6079 14.1193 30.0972 14.507C29.5865 14.8947 28.8189 14.5412 27.2835 13.8343L26.8863 13.6514C26.45 13.4505 26.2319 13.3501 26.0007 13.3501C25.7694 13.3501 25.5513 13.4505 25.115 13.6514L24.7178 13.8343C23.1824 14.5412 22.4148 14.8947 21.9041 14.507C21.3934 14.1193 21.4779 13.2472 21.6469 11.5031L21.6906 11.0519C21.7387 10.5562 21.7627 10.3084 21.6912 10.0786C21.6198 9.84886 21.4609 9.66312 21.1433 9.29164L20.854 8.95345C19.7362 7.64621 19.1772 6.99259 19.3723 6.36532C19.5673 5.73804 20.3872 5.55253 22.027 5.18152L22.4512 5.08553C22.9172 4.9801 23.1502 4.92738 23.3373 4.78537C23.5244 4.64335 23.6443 4.42812 23.8843 3.99765L24.1028 3.60575Z" fill="#F3A412"/>
                <path d="M42.1028 3.60575C42.9472 2.09091 43.3694 1.3335 44.0007 1.3335C44.6319 1.3335 45.0541 2.09091 45.8985 3.60575L46.117 3.99765C46.357 4.42812 46.4769 4.64335 46.664 4.78537C46.8511 4.92738 47.0841 4.9801 47.5501 5.08553L47.9743 5.18152C49.6141 5.55253 50.434 5.73804 50.629 6.36532C50.8241 6.99259 50.2652 7.64621 49.1473 8.95345L48.858 9.29164C48.5404 9.66312 48.3815 9.84886 48.3101 10.0786C48.2386 10.3084 48.2626 10.5562 48.3107 11.0519L48.3544 11.5031C48.5234 13.2472 48.6079 14.1193 48.0972 14.507C47.5865 14.8947 46.8189 14.5412 45.2835 13.8343L44.8863 13.6514C44.45 13.4505 44.2319 13.3501 44.0007 13.3501C43.7694 13.3501 43.5513 13.4505 43.115 13.6514L42.7178 13.8343C41.1824 14.5412 40.4148 14.8947 39.9041 14.507C39.3934 14.1193 39.4779 13.2472 39.6469 11.5031L39.6906 11.0519C39.7387 10.5562 39.7627 10.3084 39.6912 10.0786C39.6198 9.84886 39.4609 9.66312 39.1433 9.29164L38.854 8.95345C37.7362 7.64621 37.1772 6.99259 37.3723 6.36532C37.5673 5.73804 38.3872 5.55253 40.027 5.18152L40.4512 5.08553C40.9172 4.9801 41.1502 4.92738 41.3373 4.78537C41.5244 4.64335 41.6443 4.42812 41.8843 3.99765L42.1028 3.60575Z" fill="#F3A412"/>
                <path d="M60.1028 3.60575C60.9472 2.09091 61.3694 1.3335 62.0007 1.3335C62.6319 1.3335 63.0541 2.09091 63.8985 3.60575L64.117 3.99765C64.357 4.42812 64.4769 4.64335 64.664 4.78537C64.8511 4.92738 65.0841 4.9801 65.5501 5.08553L65.9743 5.18152C67.6141 5.55253 68.434 5.73804 68.629 6.36532C68.8241 6.99259 68.2652 7.64621 67.1473 8.95345L66.858 9.29164C66.5404 9.66312 66.3815 9.84886 66.3101 10.0786C66.2386 10.3084 66.2626 10.5562 66.3107 11.0519L66.3544 11.5031C66.5234 13.2472 66.6079 14.1193 66.0972 14.507C65.5865 14.8947 64.8189 14.5412 63.2835 13.8343L62.8863 13.6514C62.45 13.4505 62.2319 13.3501 62.0007 13.3501C61.7694 13.3501 61.5513 13.4505 61.115 13.6514L60.7178 13.8343C59.1824 14.5412 58.4148 14.8947 57.9041 14.507C57.3934 14.1193 57.4779 13.2472 57.6469 11.5031L57.6906 11.0519C57.7387 10.5562 57.7627 10.3084 57.6912 10.0786C57.6198 9.84886 57.4609 9.66312 57.1433 9.29164L56.854 8.95345C55.7362 7.64621 55.1772 6.99259 55.3723 6.36532C55.5673 5.73804 56.3872 5.55253 58.027 5.18152L58.4512 5.08553C58.9172 4.9801 59.1502 4.92738 59.3373 4.78537C59.5244 4.64335 59.6443 4.42812 59.8843 3.99765L60.1028 3.60575Z" fill="#F3A412"/>
                <path d="M78.1028 3.60575C78.9472 2.09091 79.3694 1.3335 80.0007 1.3335C80.6319 1.3335 81.0541 2.09091 81.8985 3.60575L82.117 3.99765C82.357 4.42812 82.4769 4.64335 82.664 4.78537C82.8511 4.92738 83.0841 4.9801 83.5501 5.08553L83.9743 5.18152C85.6141 5.55253 86.434 5.73804 86.629 6.36532C86.8241 6.99259 86.2652 7.64621 85.1473 8.95345L84.858 9.29164C84.5404 9.66312 84.3815 9.84886 84.3101 10.0786C84.2386 10.3084 84.2626 10.5562 84.3107 11.0519L84.3544 11.5031C84.5234 13.2472 84.6079 14.1193 84.0972 14.507C83.5865 14.8947 82.8189 14.5412 81.2835 13.8343L80.8863 13.6514C80.45 13.4505 80.2319 13.3501 80.0007 13.3501C79.7694 13.3501 79.5513 13.4505 79.115 13.6514L78.7178 13.8343C77.1824 14.5412 76.4148 14.8947 75.9041 14.507C75.3934 14.1193 75.4779 13.2472 75.6469 11.5031L75.6906 11.0519C75.7387 10.5562 75.7627 10.3084 75.6912 10.0786C75.6198 9.84886 75.4609 9.66312 75.1433 9.29164L74.854 8.95345C73.7362 7.64621 73.1772 6.99259 73.3723 6.36532C73.5673 5.73804 74.3872 5.55253 76.027 5.18152L76.4512 5.08553C76.9172 4.9801 77.1502 4.92738 77.3373 4.78537C77.5244 4.64335 77.6443 4.42812 77.8843 3.99765L78.1028 3.60575Z" fill="#E5E5E5"/>
            </svg>`),
      checked: false
    },
    {
      value: 5,
      name: 5,
      svg: this.sanitizer.bypassSecurityTrustHtml(`<svg width="88" height="16" viewBox="0 0 88 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.10276 3.60575C6.94719 2.09091 7.36941 1.3335 8.00065 1.3335C8.63189 1.3335 9.05411 2.09091 9.89854 3.60575L10.117 3.99765C10.357 4.42812 10.4769 4.64335 10.664 4.78537C10.8511 4.92738 11.0841 4.9801 11.5501 5.08553L11.9743 5.18152C13.6141 5.55253 14.434 5.73804 14.629 6.36532C14.8241 6.99259 14.2652 7.64621 13.1473 8.95345L12.858 9.29164C12.5404 9.66312 12.3815 9.84886 12.3101 10.0786C12.2386 10.3084 12.2626 10.5562 12.3107 11.0519L12.3544 11.5031C12.5234 13.2472 12.6079 14.1193 12.0972 14.507C11.5865 14.8947 10.8189 14.5412 9.28354 13.8343L8.88633 13.6514C8.45003 13.4505 8.23189 13.3501 8.00065 13.3501C7.76942 13.3501 7.55127 13.4505 7.11498 13.6514L6.71777 13.8343C5.18243 14.5412 4.41477 14.8947 3.90408 14.507C3.3934 14.1193 3.4779 13.2472 3.64692 11.5031L3.69064 11.0519C3.73867 10.5562 3.76268 10.3084 3.69123 10.0786C3.61977 9.84886 3.46093 9.66312 3.14326 9.29164L2.85405 8.95345C1.73615 7.64621 1.1772 6.99259 1.37227 6.36532C1.56733 5.73804 2.38722 5.55253 4.02701 5.18152L4.45124 5.08553C4.91722 4.9801 5.15021 4.92738 5.33728 4.78537C5.52435 4.64335 5.64433 4.42812 5.8843 3.99765L6.10276 3.60575Z" fill="#F3A412"/>
                <path d="M24.1028 3.60575C24.9472 2.09091 25.3694 1.3335 26.0007 1.3335C26.6319 1.3335 27.0541 2.09091 27.8985 3.60575L28.117 3.99765C28.357 4.42812 28.4769 4.64335 28.664 4.78537C28.8511 4.92738 29.0841 4.9801 29.5501 5.08553L29.9743 5.18152C31.6141 5.55253 32.434 5.73804 32.629 6.36532C32.8241 6.99259 32.2652 7.64621 31.1473 8.95345L30.858 9.29164C30.5404 9.66312 30.3815 9.84886 30.3101 10.0786C30.2386 10.3084 30.2626 10.5562 30.3107 11.0519L30.3544 11.5031C30.5234 13.2472 30.6079 14.1193 30.0972 14.507C29.5865 14.8947 28.8189 14.5412 27.2835 13.8343L26.8863 13.6514C26.45 13.4505 26.2319 13.3501 26.0007 13.3501C25.7694 13.3501 25.5513 13.4505 25.115 13.6514L24.7178 13.8343C23.1824 14.5412 22.4148 14.8947 21.9041 14.507C21.3934 14.1193 21.4779 13.2472 21.6469 11.5031L21.6906 11.0519C21.7387 10.5562 21.7627 10.3084 21.6912 10.0786C21.6198 9.84886 21.4609 9.66312 21.1433 9.29164L20.854 8.95345C19.7362 7.64621 19.1772 6.99259 19.3723 6.36532C19.5673 5.73804 20.3872 5.55253 22.027 5.18152L22.4512 5.08553C22.9172 4.9801 23.1502 4.92738 23.3373 4.78537C23.5244 4.64335 23.6443 4.42812 23.8843 3.99765L24.1028 3.60575Z" fill="#F3A412"/>
                <path d="M42.1028 3.60575C42.9472 2.09091 43.3694 1.3335 44.0007 1.3335C44.6319 1.3335 45.0541 2.09091 45.8985 3.60575L46.117 3.99765C46.357 4.42812 46.4769 4.64335 46.664 4.78537C46.8511 4.92738 47.0841 4.9801 47.5501 5.08553L47.9743 5.18152C49.6141 5.55253 50.434 5.73804 50.629 6.36532C50.8241 6.99259 50.2652 7.64621 49.1473 8.95345L48.858 9.29164C48.5404 9.66312 48.3815 9.84886 48.3101 10.0786C48.2386 10.3084 48.2626 10.5562 48.3107 11.0519L48.3544 11.5031C48.5234 13.2472 48.6079 14.1193 48.0972 14.507C47.5865 14.8947 46.8189 14.5412 45.2835 13.8343L44.8863 13.6514C44.45 13.4505 44.2319 13.3501 44.0007 13.3501C43.7694 13.3501 43.5513 13.4505 43.115 13.6514L42.7178 13.8343C41.1824 14.5412 40.4148 14.8947 39.9041 14.507C39.3934 14.1193 39.4779 13.2472 39.6469 11.5031L39.6906 11.0519C39.7387 10.5562 39.7627 10.3084 39.6912 10.0786C39.6198 9.84886 39.4609 9.66312 39.1433 9.29164L38.854 8.95345C37.7362 7.64621 37.1772 6.99259 37.3723 6.36532C37.5673 5.73804 38.3872 5.55253 40.027 5.18152L40.4512 5.08553C40.9172 4.9801 41.1502 4.92738 41.3373 4.78537C41.5244 4.64335 41.6443 4.42812 41.8843 3.99765L42.1028 3.60575Z" fill="#F3A412"/>
                <path d="M60.1028 3.60575C60.9472 2.09091 61.3694 1.3335 62.0007 1.3335C62.6319 1.3335 63.0541 2.09091 63.8985 3.60575L64.117 3.99765C64.357 4.42812 64.4769 4.64335 64.664 4.78537C64.8511 4.92738 65.0841 4.9801 65.5501 5.08553L65.9743 5.18152C67.6141 5.55253 68.434 5.73804 68.629 6.36532C68.8241 6.99259 68.2652 7.64621 67.1473 8.95345L66.858 9.29164C66.5404 9.66312 66.3815 9.84886 66.3101 10.0786C66.2386 10.3084 66.2626 10.5562 66.3107 11.0519L66.3544 11.5031C66.5234 13.2472 66.6079 14.1193 66.0972 14.507C65.5865 14.8947 64.8189 14.5412 63.2835 13.8343L62.8863 13.6514C62.45 13.4505 62.2319 13.3501 62.0007 13.3501C61.7694 13.3501 61.5513 13.4505 61.115 13.6514L60.7178 13.8343C59.1824 14.5412 58.4148 14.8947 57.9041 14.507C57.3934 14.1193 57.4779 13.2472 57.6469 11.5031L57.6906 11.0519C57.7387 10.5562 57.7627 10.3084 57.6912 10.0786C57.6198 9.84886 57.4609 9.66312 57.1433 9.29164L56.854 8.95345C55.7362 7.64621 55.1772 6.99259 55.3723 6.36532C55.5673 5.73804 56.3872 5.55253 58.027 5.18152L58.4512 5.08553C58.9172 4.9801 59.1502 4.92738 59.3373 4.78537C59.5244 4.64335 59.6443 4.42812 59.8843 3.99765L60.1028 3.60575Z" fill="#F3A412"/>
                <path d="M78.1028 3.60575C78.9472 2.09091 79.3694 1.3335 80.0007 1.3335C80.6319 1.3335 81.0541 2.09091 81.8985 3.60575L82.117 3.99765C82.357 4.42812 82.4769 4.64335 82.664 4.78537C82.8511 4.92738 83.0841 4.9801 83.5501 5.08553L83.9743 5.18152C85.6141 5.55253 86.434 5.73804 86.629 6.36532C86.8241 6.99259 86.2652 7.64621 85.1473 8.95345L84.858 9.29164C84.5404 9.66312 84.3815 9.84886 84.3101 10.0786C84.2386 10.3084 84.2626 10.5562 84.3107 11.0519L84.3544 11.5031C84.5234 13.2472 84.6079 14.1193 84.0972 14.507C83.5865 14.8947 82.8189 14.5412 81.2835 13.8343L80.8863 13.6514C80.45 13.4505 80.2319 13.3501 80.0007 13.3501C79.7694 13.3501 79.5513 13.4505 79.115 13.6514L78.7178 13.8343C77.1824 14.5412 76.4148 14.8947 75.9041 14.507C75.3934 14.1193 75.4779 13.2472 75.6469 11.5031L75.6906 11.0519C75.7387 10.5562 75.7627 10.3084 75.6912 10.0786C75.6198 9.84886 75.4609 9.66312 75.1433 9.29164L74.854 8.95345C73.7362 7.64621 73.1772 6.99259 73.3723 6.36532C73.5673 5.73804 74.3872 5.55253 76.027 5.18152L76.4512 5.08553C76.9172 4.9801 77.1502 4.92738 77.3373 4.78537C77.5244 4.64335 77.6443 4.42812 77.8843 3.99765L78.1028 3.60575Z" fill="#F3A412"/>
            </svg>`),
      checked: false
    },
  ]
  priceInvalid=false;
  private priceDisable=false;
  categoriesId:any;
  categoriesName:any;
  constructor(
    private changeDetectorRef: ChangeDetectorRef,
    private router: Router,
    private route: ActivatedRoute,
    private sanitizer: DomSanitizer,
    private productService:ProductService
  )
  {
    this.lstProduct=[];
    this.searchProduct.propertySort='productName'
    this.route.queryParams.subscribe((resp:any)=>{
      console.log(resp)
      if(resp.keyword){
        this.searchProduct.nameSearch = resp.keyword;
      }else{
        this.searchProduct.nameSearch = '';
      }
      if(resp.categoriesId){
        this.searchProduct.categoriesId=resp.categoriesId
        this.categoriesName=resp.categoriName
      }
      this.search();
      // this.onClearSearch()
    })
  }

  onClearSearch() {
    const {propertySort, nameSearch} = this.searchProduct;
    this.searchProduct = new SearchProduct();
    this.searchProduct.nameSearch=nameSearch;
    this.searchProduct.propertySort=propertySort;
    this.listRate.forEach((item:any) => item.checked = false)
  }

  ngOnInit(): void {
    this.search()
  }

  callInforReview(param:any, page: any) {
      this.searchProduct.page= page
      this.search()
  }

  onApplyCondition(number: number) {
    if(this.searchProduct.toPrice<this.searchProduct.fromPrice) {
      this.priceInvalid = true;
    }
    else {
      this.priceInvalid = false;
      this.searchProduct.page=number
      this.search()
    }
  }

  search(){
    // this.route.queryParams.subscribe((resp:any)=>{
    //   console.log(resp)
    //   if(resp.keyword){
    //     this.searchProduct.nameSearch = resp['keyword'];
    //   }else{
    //     this.searchProduct.nameSearch = '';
    //   }
    //   if(resp.categoriesId){
    //     this.searchProduct.categoriesId =resp['categoriesId'];
    //   }else{
    //     this.searchProduct.categoriesId=undefined;
    //   }
    // })
    if(this.searchProduct.fromPrice){
      this.searchProduct.fromPrice = this.convertStringToNumber(this.searchProduct.fromPrice+"");
    }
    if(this.searchProduct.toPrice){

      this.searchProduct.toPrice = this.convertStringToNumber(this.searchProduct.toPrice+"");
    }

    this.productService.searchProduct(this.searchProduct).subscribe((res:any)=>{
      this.lstProduct = res.data.content;
      this.totalPage=res.data.totalPages;
      this.totalElement = res.data.totalElements
    })
  }
  convertStringToNumber(numberString: string): number {
    // Loại bỏ dấu phẩy và chuyển đổi sang số
    return Number(numberString.replace(/,/g, ''));
  }

  fomatPrice(){
    if (this.searchProduct.fromPrice){
      this.searchProduct.fromPrice = this.searchProduct.fromPrice.replace(/[^0-9]/g, '').replace(/(\..*?)\..*/g, '$1');
      this.searchProduct.fromPrice = Number(this.searchProduct.fromPrice).toLocaleString('en-US');
      this.changePrice(1);
    }
    if (this.searchProduct.toPrice){
      this.searchProduct.toPrice = this.searchProduct.toPrice.replace(/[^0-9]/g, '').replace(/(\..*?)\..*/g, '$1');
      this.searchProduct.toPrice = Number(this.searchProduct.toPrice).toLocaleString('en-US');
      this.changePrice(2)
    }
    this.onChangePrice();
  }
  changePrice(value:any) {
    if (value === 1) {
      if (!this.searchProduct.fromPrice) return;
      this.searchProduct.fromPrice = this.searchProduct.fromPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')
    } else {
      if (!this.searchProduct.toPrice) return;
      this.searchProduct.toPrice = this.searchProduct.toPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')
    }
  }

  onChangePrice() {
    const priceFrom = parseInt(CommonFunction.replaceAll(this.searchProduct.fromPrice,',',''));
    const priceTo = parseInt(CommonFunction.replaceAll(this.searchProduct.toPrice,',',''));
    this.priceInvalid = priceFrom > priceTo
    // this.priceDisable = _.isNaN(priceFrom) && _.isNaN(priceTo)
    console.log('Change price ', priceFrom, ' + ', priceTo, ' + ', this.priceInvalid)
  }

  viewFile(item: any) {
    this.router.navigate(["/details"],{queryParams: {
        id: parseInt(item.id,10),
      }})
  }

  updateSearchRate() {
    const selectedRate = new Set<number>();
    this.listRate.forEach((item:any) => {
      if (item.checked) {
        selectedRate.add(item.value);
      } else {
        selectedRate.delete(item.value);
      }
    });

    this.searchProduct.star = Array.from(selectedRate);
    console.log(this.searchProduct)
  }

  sortBy(sort: string) {
    this.searchProduct.propertySort=sort
  }

  removeSearchCategories() {
    // params['vnp_Amount'];
    // this.menuHorizon.categoriesIdSearch
    this.categoriesId=null;
    this.categoriesName=null;
    this.searchProduct.categoriesId=undefined
    let dataSearch
    if(this.searchProduct.nameSearch){
      dataSearch={
        keyword:this.searchProduct.nameSearch
      }
    }
    this.router.navigate(["/search-page-product"], {queryParams: dataSearch})
  }
}
export class SearchProduct {
  propertySort?: string = '';
  fromPrice?: any;
  toPrice?: any;
  nameSearch?: string = '';
  star?: number[];
  categoriesId?: number;
  page:number=1;
  pageSize:number=9;
}
